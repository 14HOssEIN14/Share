import time
import os
import requests
from telegram import Bot

# ðŸ”¹ ØªÙˆÚ©Ù† Ùˆ Ú†Øª Ø¢ÛŒØ¯ÛŒ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯
TOKEN = "YOUR_BOT_TOKEN"
CHAT_ID = "YOUR_CHAT_ID"

# ðŸ”¹ Ø³Ø§Ø®Øª Ø´ÛŒ Ø¨Ø§Øª ØªÙ„Ú¯Ø±Ø§Ù…
bot = Bot(token=TOKEN)

def get_cpu_temp():
    """ Ø¯Ù…Ø§ÛŒ CPU Ø±Ø§ Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯ """
    temp = os.popen("vcgencmd measure_temp").readline()
    return float(temp.replace("temp=", "").replace("'C\n", ""))

def send_telegram_message(text):
    """ Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù… Ø¨Ù‡ ØªÙ„Ú¯Ø±Ø§Ù… """
    url = f"https://api.telegram.org/bot{TOKEN}/sendMessage"
    data = {"chat_id": CHAT_ID, "text": text}
    requests.post(url, data=data)

def make_telegram_call():
    """ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ ØªÙ…Ø§Ø³ Ø¯Ø± ØªÙ„Ú¯Ø±Ø§Ù… (Ø¨Ø§ Ø§Ø±Ø³Ø§Ù„ ÛŒÚ© Ù¾ÛŒØ§Ù… ØµÙˆØªÛŒ) """
    url = f"https://api.telegram.org/bot{TOKEN}/sendVoice"
    data = {"chat_id": CHAT_ID}
    files = {"voice": open("alarm.ogg", "rb")}
    requests.post(url, data=data, files=files)

def main():
    while True:
        temp = get_cpu_temp()
        message = f"ðŸŒ¡ Ø¯Ù…Ø§ÛŒ CPU: {temp}Â°C"
        
        send_telegram_message(message)  # Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…
        
        if temp > 50:
            send_telegram_message("ðŸš¨ Ù‡Ø´Ø¯Ø§Ø±! Ø¯Ù…Ø§ÛŒ CPU Ø§Ø² ÛµÛ°Â°C Ø¹Ø¨ÙˆØ± Ú©Ø±Ø¯Ù‡ Ø§Ø³Øª!")
            make_telegram_call()  # ØªÙ…Ø§Ø³ Ø¨Ø§ ØªÙ„Ú¯Ø±Ø§Ù…

        time.sleep(60)  # Ù‡Ø± Û± Ø¯Ù‚ÛŒÙ‚Ù‡ Ø§Ø¬Ø±Ø§ Ø´ÙˆØ¯

if __name__ == "__main__":
    main()
